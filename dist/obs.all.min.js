/*!
  * aug.js - A javascript library to extend existing objects and prototypes 
  * v0.0.5
  * https://github.com/jgallen23/aug
  * copyright JGA 2011
  * MIT License
  */var aug=function(){var t,n,r,i,s,o,u=!1,a=Array.prototype.slice.call(arguments),f=a.shift(),l=0;typeof f=="boolean"&&(u=!0,f=a.shift());for(o=a.length;l<o;l++){if((t=a[l])===null)continue;for(n in t){r=f[n],i=t[n];if(f===i)continue;u&&i&&typeof i=="object"?(i instanceof Array?s=r&&r instanceof Array?r:[]:s=r&&typeof r=="object"?r:{},f[n]=aug(u,s,i)):f[n]=i}}return f};typeof module!="undefined"&&(module.exports=aug),function(e){function r(){this._subscribers=[]}var t=function(t){return e[t]},n=e.sublish={};r.prototype={subscribe:function(e){this._subscribers.push(e)},unsubscribe:function(e){for(var t=0;t<this._subscribers.length;t++)if(this._subscribers[t]===e)return this._subscribers.splice(t,1),!0;return!1},publish:function(){var e=Array.prototype.slice.call(arguments,0);for(var t=0;t<this._subscribers.length;t++)this._subscribers[t].apply(this,e)}},n.PubSub=r}(this),function(e){function u(e,t){function i(){if(!arguments.length)return i._previousValue=i._currentValue,n&&(i._currentValue=e.apply(i),n=!1,i.notify()),i._currentValue;if(typeof t!="function")throw new Error("This observable is read-only!");t.apply(i,arguments)}var n=!0;return r(i,{_initialValue:undefined,_onNotify:function(){n=!0}})}function a(e,t){function n(){if(!arguments.length)return n._currentValue;if(typeof t!="function")throw new Error("This observable is read-only!");t.apply(n,arguments)}return r(n,{_initialValue:e.apply(n),_onNotify:function(){n._previousValue=n._currentValue,n._currentValue=e.apply(n),n.notify()}})}function f(e){function t(){if(!arguments.length)throw new Error("This observable is write-only!");e.apply(t,arguments)}return t._initialValue=undefined,t}var t=function(t){return e[t]},n=e.obs={},r=t("aug"),i=t("sublish").PubSub,s=Array.prototype.slice,o=Array.isArray?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"};n.prop=r(function(e){function t(e){if(!arguments.length)return t._currentValue;t._previousValue=t._currentValue,t._currentValue=e,t.notify()}return r(t,i.prototype,{_initialValue:e,_currentValue:e,dirty:!1},n.prop.fn),i.apply(t),t},{readOnly:function(e){function t(){if(arguments.length)throw new Error("This observable is read-only!");return t._currentValue}return r(t,i.prototype,{_initialValue:e,_currentValue:e,dirty:!1},n.prop.fn),i.apply(t),t},fn:{__is_obs__:!0,notify:function(){this.dirty=this._currentValue===this._initialValue,this.publish(this._currentValue,this._previousValue)},peek:function(){return this._currentValue},reset:function(){this(this._initialValue)}}}),n.computed=r(function(e,t,s){var l=!1;arguments.length===1&&typeof e=="object"?(t=e.write,s=e.watched,l=e.lazy,e=e.read,s&&!o(s)&&(s=[s])):arguments.length===2&&o(t)&&(s=t,t=undefined);if(!e&&!t)throw new Error("No read function and no write function provided!");var c=e?(l?u:a)(e,t):f(t);return r(c,i.prototype,{_currentValue:c._initialValue,dirty:!1,_subscriptions:[]},n.computed.fn),i.apply(c),e&&o(s)&&c.watch.apply(c,s),c},{lazy:function(e,t,i){return arguments.length===1&&typeof e=="object"?n.computed(r({lazy:!0},e)):(arguments.length===2&&o(t)&&(i=t,t=undefined),n.computed({read:e,write:t,watched:i,lazy:!0}))},fn:r({},n.prop.fn,{watch:function(){var e=s.call(arguments,0),t,n;for(n=0;n<e.length;n++)t=e[n],t&&typeof t.subscribe=="function"&&(t.subscribe(this._onNotify),this._subscriptions.push(t));return this},unwatch:function(){var e=s.call(arguments,0),t=this._subscriptions,n,r,i;for(n=0;n<e.length;n++)i=e[n],i&&typeof i.unsubscribe=="function"&&i.unsubscribe(this._onNotify);this._subscriptions=[];for(n=0;n<t.length;n++){i=t[n];for(r=0;r<e.length;r++)if(e[r]===i){this._subscriptions.push(i);break}}return this},dismiss:function(){this.unwatch.apply(this,this._subscriptions)}})})}(this);
/*!
  * aug.js - A javascript library to extend existing objects and prototypes 
  * v0.0.5
  * https://github.com/jgallen23/aug
  * copyright JGA 2011
  * MIT License
  */var aug=function(){var t,n,r,i,s,o,u=!1,a=Array.prototype.slice.call(arguments),f=a.shift(),l=0;typeof f=="boolean"&&(u=!0,f=a.shift());for(o=a.length;l<o;l++){if((t=a[l])===null)continue;for(n in t){r=f[n],i=t[n];if(f===i)continue;u&&i&&typeof i=="object"?(i instanceof Array?s=r&&r instanceof Array?r:[]:s=r&&typeof r=="object"?r:{},f[n]=aug(u,s,i)):f[n]=i}}return f};typeof module!="undefined"&&(module.exports=aug),function(e,t){typeof exports=="object"?t(exports,require("aug"),require("sublish")):typeof define=="function"&&define.amd?define(["exports","aug","sublish"],t):t(e.obs={},e.aug)}(this,function(e,t,n){function r(e){function r(){return r._previousValue=r._currentValue,n&&(r._currentValue=e(),n=!1,r.notify()),r._currentValue}var n=!0;return t(r,{_initialValue:undefined,_onNotify:function(){n=!0}})}function i(e){function r(){return r._currentValue}var n=e();return t(r,{_initialValue:n,_onNotify:function(){this._previousValue=this._currentValue,this._currentValue=e(),this.notify()}.bind(r)})}e.prop=t(function(r){function i(e){if(!arguments.length)return i._currentValue;typeof i.validate=="function"&&i.validate(e),i._previousValue=i._currentValue,i._currentValue=e,i.notify()}return n.PubSub(i),t(i,{_initialValue:r,_currentValue:r,dirty:!1},e.prop.fn),i},{fn:{__is_obs__:!0,notify:function(){this.dirty=this._currentValue===this._initialValue,this.publish(this._currentValue,this._previousValue)},peek:function(){return this._currentValue},dismiss:function(){},reset:function(){this(this._initialValue)}}}),e.computed=t(function(s,o,u){var a=(u?r:i)(s);return n.PubSub(a),t(a,{_currentValue:a._initialValue,_dependencies:[]},e.computed.fn),o&&(Array.isArray(o)?a.watch.apply(a,o):a.watch(o)),a},{fn:{__is_obs__:!0,notify:function(){this.dirty=this._currentValue===this._initialValue,this.publish(this._currentValue,this._previousValue)},peek:function(){return this._currentValue},watch:function(){Array.prototype.forEach.call(arguments,function(e){e&&typeof e.subscribe=="function"&&(e.subscribe(this._onNotify),this._dependencies.push(e))}.bind(this))},unwatch:function(){var e=Array.prototype.slice.call(arguments,0),t=this._dependencies;e.forEach(function(e){e&&typeof e.unsubscribe=="function"&&e.unsubscribe(this._onNotify)}.bind(this)),this._dependencies=t.filter(function(t){return e.indexOf(t)===-1})},dismiss:function(){this.unwatch.apply(this,this._dependencies)}}})}),function(e,t){typeof exports=="object"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(e.pubsub={})}(this,function(e){function t(e){e=e?n(e):this,e._subscribers=[]}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}t.prototype={subscribe:function(e){this._subscribers.push(e)},unsubscribe:function(e){var t=this._subscribers.indexOf(e);return~t&&this._subscribers.splice(t,1),!!~t},publish:function(){var e=Array.prototype.slice.call(arguments,0);this._subscribers.forEach(function(t){t.apply(this,e)}.bind(this))}},e.PubSub=t});
!function(t){var e=function i(){var t=Array.prototype.slice.call(arguments);var i=false;var r=t.shift();var n="";if(typeof r==="string"||typeof r==="boolean"){n=r===true?"deep":r;r=t.shift();if(n=="defaults"){r=e({},r);n="strict"}}for(var u=0,s=t.length;u<s;u++){var o=t[u];for(var c in o){if(n=="deep"&&typeof o[c]==="object"&&typeof r[c]!=="undefined"){e(n,r[c],o[c])}else if(n!="strict"||n=="strict"&&typeof r[c]!=="undefined"){r[c]=o[c]}}}return r};if(typeof module!=="undefined"){module.exports=e}else{if(typeof define==="function"&&define.amd){define(function(){return e})}t.aug=e}}(this);/*! sublish 0.4.4 Copyright (c) 2013 Alan Plum. MIT licensed. @preserve */
!function(t){var e=function(e){return t[e]},i=t.sublish={};function r(){this._subscribers=[]}r.prototype={subscribe:function(t){this._subscribers.push(t)},unsubscribe:function(t){for(var e=0;e<this._subscribers.length;e++){if(this._subscribers[e]===t){this._subscribers.splice(e,1);return true}}return false},publish:function(){var t=Array.prototype.slice.call(arguments,0);for(var e=0;e<this._subscribers.length;e++){this._subscribers[e].apply(this,t)}}};i.PubSub=r}(this);/*! obs 0.9.1 Copyright (c) 2013 Alan Plum. MIT licensed. @preserve */
!function(t){var e=function(e){return t[e]},i={};var r=e("sublish").PubSub,n=e("aug"),u=Array.prototype.slice,s=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},o=Array.prototype.indexOf?function(t,e){return!!~t.indexOf(e)}:function(t,e){for(var i=0;i<t.length;i++){if(t[i]===e){return true}}return false};function c(t){var e=t[0];if(typeof e==="function"){e={compute:t[0]};if(t.length>1){if(typeof t[1]==="function"){e.write=t[1];if(t.length>2){e.watch=t[2]}}else{e.watch=t[1]}}}return e}function a(t){function e(t){if(arguments.length){if(typeof e.write==="function"){e.write.call(e.context,t)}else{throw new Error("This observable cannot be written to!")}}else{if(typeof e.read==="function"){return e.read.call(e.context)}else{throw new Error("This observable cannot be read from!")}}}n(e,r.prototype,{context:t.context||e,read:t.read,write:t.write,onNotify:function(t){return function(){t.call(e)}}(t.onNotify||function(){}),_initialValue:t.value,_currentValue:t.value,_previousValue:undefined,_subscriptions:[]},a.fn);r.apply(e);if(t.watch){e.watch.apply(e,s(t.watch)?t.watch:[t.watch])}return e}a.fn={__is_obs__:true,notify:function(){this.dirty=this._currentValue===this._initialValue;this.publish(this._currentValue,this._previousValue)},peek:function(){return this._currentValue},commit:function(){this._initialValue=this._currentValue;this.dirty=false},reset:function(){this._previousValue=this._currentValue;this._currentValue=this._initialValue;this.notify()},watch:function(){var t=u.call(arguments,0),e,i;for(i=0;i<t.length;i++){e=t[i];if(o(this._subscriptions,e)){continue}if(e&&typeof e.subscribe==="function"){e.subscribe(this.onNotify);this._subscriptions.push(e)}}return this},unwatch:function(){var t=u.call(arguments,0),e=this._subscriptions,i,r;for(i=0;i<t.length;i++){r=t[i];if(r&&typeof r.unsubscribe==="function"){r.unsubscribe(this.onNotify)}}this._subscriptions=[];for(i=0;i<e.length;i++){r=e[i];if(!o(t,r)){this._subscriptions.push(r)}}return this},dismiss:function(){this.unwatch.apply(this,this._subscriptions)}};a.prop=function(t){return a({read:function(){return this._currentValue},write:function(t){this._previousValue=this._currentValue;this._currentValue=t;this.notify()},value:t})};a.computed=function(t){t=c(arguments);var e=a(n({},t,{read:function(){return e._currentValue},onNotify:function(){this._previousValue=this._currentValue;this._currentValue=t.compute.call(this.context);this.notify()}}));if(t.compute){e._initialValue=t.compute.call(e.context);e._currentValue=e._initialValue}if(t.watch){e.watch.apply(e,s(t.watch)?t.watch:[t.watch])}return e};a.computed.lazy=function(t){t=c(arguments);var e=true;var i=a(n({},t,{context:t.context,read:function(){if(e){e=false;i._previousValue=i._currentValue;i._currentValue=t.compute.call(this);i.notify()}return i._currentValue},write:t.write,onNotify:function(){e=true},watch:t.watch}));return i};i.exports=a;t.obs=i.exports}(this);